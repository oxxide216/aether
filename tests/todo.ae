(use 'std/core.ae')
(use 'std/str.ae')

(let todos [])

(let add-todo [todo] ->
  (set todos (+ todos todo)))

(let remove-todo [todo-to-remove] ->
  (set todos (filter [todo] -> (!= todo todo-to-remove) <> todos)))

(let print-todos [left] ->
  (if left
    (println (head left))
    (<-> (tail left))))

(while true
  (print '>> ')

  (let command (split (input) ' '))

  (if (land (== (head command) 'add') (tail command))
    (add-todo (nth command 1))
   elif (land (== (head command) 'remove') (tail command))
    (remove-todo (head (tail command)))
   elif (== (head command) 'list')
    (print-todos todos)
   else
    (print 'ERROR: `')
    (print (head command))
    (println '`: unknown command')))
