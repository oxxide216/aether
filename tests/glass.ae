(use 'std/glass.ae')

(let quad-width 60.0)
(let quad-height 30.0)
(let circle-radius 80.0)

(let event-hanlder [state event] ->
  (if (or (== (get-at event 'type') 'key-press')
          (== (get-at event 'type') 'key-hold'))
    (println (get-at event 'key-code'))))

(let main-loop [state] ->
  (glass/clear 0.0 0.0 0.0 1.0)

  (let size (glass/window-size))

  (glass/circle (/ (- (get-at size 'width') circle-radius) 2.0)
                (/ (- (get-at size 'height') circle-radius) 2.0)
                circle-radius 1.0 1.0 1.0 1.0)

  (glass/quad (/ (- (get-at size 'width') quad-width) 2.0)
              (/ (- (get-at size 'height') quad-height) 2.0)
              quad-width quad-height 1.0 1.0 1.0 1.0))

(glass/run 'Hello, OpenGL!' 640 480 unit event-hanlder main-loop)
