(use 'std/core.ae')
(use 'std/net.ae')
(use 'std/system.ae')

(let server (create-server 8080))
(if (unit? server)
  (println 'ERROR: Could not create server')
  (exit 1))

(while true
  (let client (accept-connection server 8080))
  (if (int? client)
    (send client 'Hello, Network!')
    (let response (receive client))
    (println response)
    (close-connection client))

  (sleep 0.01))
