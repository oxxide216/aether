(use 'std/core.ae')
(use 'std/base.ae')
(use 'std/term.ae')
(use 'std/str.ae')
(use 'std/io.ae')
(use 'std/log.ae')

(use 'module-loader.ae')

(let args (get-args))

(if (< (len args) 2)
  (error 'Input file was not provided')
  (exit 1))

(let env (make-env))
(load-module env 'core' core-path)
(load-module env 'base' base-path)

(let path args::1)
(let content (read-file path))
(if (unit? content)
  (error 'Could not open input file ' path)
  (exit 1))

(eval-compiled env content)
